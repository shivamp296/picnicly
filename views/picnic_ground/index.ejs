<% layout('layouts/boilerplate') %>

<div id="map" style="width: 100%; height:400px"></div>

<h1>All picnic spots</h1>
<div>
    <a href="/picnic_ground/new">Click here for adding new Picnic Ground</a>
</div>

<ul>
    <!-- picnics is a database collection where we seeded n stored data -->
    <% for(let i of picnic_ground1){ %>

        <% /* %>
        Thsi is comment
        <li><a href="/picnic_ground/<%=i._id%>"><%= i.title %></a></li>
        <% */ %>

        <div class="card mb-3">
            <div class="row">

                <div class="col-md-4">
                    <% if(i.image.length) { %> 
                    <img class="img-fluid" src="<%= i.image[0].url %> " alt="">
                    <% }else { %>
                    <img class="img-fluid" src="https://res.cloudinary.com/psaber29/image/upload/v1623959255/Picnic/welmrky6xn6rxonkpqdp.jpg" alt="">   
                    <% } %> 
                </div>

                <div class="col-md-8">
                    <div class="card-body">
                        <h5 class="card-title"><%= i.title %> </h5>
                        <p class="card-text"><%= i.description %> </p>
                        <p class="card-text">
                            <small class="text-muted"><%= i.location %> </small>
                        </p>
                        <a class="btn btn-primary" href="/picnic_ground/<%= i._id %>">View <%= i.title %> </a>
                    </div>
                </div>

            </div>
        </div>

    <% } %> 
</ul>

<script>
    const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
    const picnic_info = {features: <%-JSON.stringify(picnic_ground1)%>};
</script>

<script src="/js/clusterMap.js"></script>